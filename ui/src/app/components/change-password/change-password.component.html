<section class="content-header">
  <h1>Change Password <small>because your password is outdated</small></h1>
</section>
<section class="content">
  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <form name="form" (ngSubmit)="f.form.valid && changePasswod()" #f="ngForm" novalidate>
        <div class="form-group has-feedback" [ngClass]="{ 'has-error': f.submitted && !old_password.valid }">
          <input type="password" class="form-control" name="old_password" placeholder="Old password" [(ngModel)]="model.old_password" #old_password="ngModel" required />
          <div *ngIf="f.submitted && !old_password.valid" class="help-block">Please enter Old Password</div>
        </div>
        <div class="form-group has-feedback" [ngClass]="{ 'has-error': !new_password.valid && (f.submitted || new_password.dirty)}">
          <input type="password" class="form-control" name="new_password" placeholder="New Password" [(ngModel)]="model.new_password" #new_password="ngModel" required validateEqual="new_password_confirmation" reverse="true" />
          <div *ngIf="!new_password.valid && (f.submitted || new_password.dirty)" class="help-block">Please enter New Password</div>
        </div>
        <div class="form-group has-feedback" [ngClass]="{ 'has-error': !new_password_confirmation.valid && (f.submitted || new_password_confirmation.dirty) }">
          <input type="password" class="form-control" name="new_password_confirmation" placeholder="Retype New Password" [(ngModel)]="model.new_password_confirmation" #new_password_confirmation="ngModel" required validateEqual="new_password" reverse="false" />
          <div *ngIf="!new_password_confirmation.valid && (f.submitted || new_password_confirmation.dirty)" class="help-block">Password mismatch</div>
        </div>
        <div class="row">
          <div class="col-xs-4">
            <button [disabled]="loading" class="btn btn-primary btn-block btn-flat">
              {{ loading ? '...' : 'Change Password' }}
            </button>
          </div>
        </div>
        <div *ngIf="error" class="alert alert-danger">{{error}}</div>
      </form>
    </div>
  </div>
</section>
